# ðŸ§ª æ¯æ—¥é€šçŸ¥åŠŸèƒ½æµ‹è¯•åœºæ™¯

## æµ‹è¯•çŽ¯å¢ƒè®¾ç½®

```
ç”¨æˆ· ID: 123456789
æ—¶åŒº: UTC+8
å¼€å§‹æ—¶é—´: 08:00
ç»“æŸæ—¶é—´: 22:00
æ¯æ—¥ç›®æ ‡: 2000ml
```

---

## æµ‹è¯•åœºæ™¯ 1ï¼šåŸºæœ¬åŠŸèƒ½æµ‹è¯•

### æ­¥éª¤ 1ï¼šç”¨æˆ·å¯åŠ¨æœºå™¨äºº
```
è¾“å…¥: /start
é¢„æœŸï¼š
- æ”¶åˆ°æ¬¢è¿Žæ¶ˆæ¯
- åŽå°åˆ›å»º 3 ä¸ª Jobï¼š
  - reminder_123456789 (å®šæ—¶æé†’)
  - daily_start_123456789 (08:00 å¼€å§‹é€šçŸ¥)
  - daily_end_123456789 (22:00 ç»“æŸæŠ¥å‘Š)
```

### æ­¥éª¤ 2ï¼šç­‰å¾…æˆ–æ¨¡æ‹Ÿ 08:00
```
é¢„æœŸæ”¶åˆ°æ¶ˆæ¯ï¼š
ðŸŒ… æ–°çš„ä¸€å¤©å¼€å§‹äº†ï¼

ðŸ“Š ä»Šæ—¥ç›®æ ‡: 2000 ml

ðŸ’ª [éšæœºé¼“åŠ±è¯­]

ç›´æŽ¥å‘é€æ•°å­—ï¼ˆå¦‚ 200ï¼‰è®°å½•é¥®æ°´é‡
```

### æ­¥éª¤ 3ï¼šç”¨æˆ·æ•´å¤©è®°å½•é¥®æ°´
```
è®°å½•ï¼š
200ml + 200ml + 300ml + 200ml + 150ml + 200ml = 1250ml
```

### æ­¥éª¤ 4ï¼šç­‰å¾…æˆ–æ¨¡æ‹Ÿ 22:00
```
é¢„æœŸæ”¶åˆ°æ¶ˆæ¯ï¼š
ðŸ“‹ ä»Šæ—¥å–æ°´æŠ¥å‘Š

ðŸŽ¯ ç›®æ ‡: 2000 ml
ðŸ’§ å®žé™…: 1250 ml
ðŸ“Š å®Œæˆåº¦: 62%
çŠ¶æ€: âŒ æœªè¾¾æˆ

ðŸ’ª ä¸Žæ˜¨æ—¥å¯¹æ¯”
[å¯¹æ¯”ç»“æžœ]

ðŸŒ™ [éšæœºå®Œæˆè¯­]
```

---

## æµ‹è¯•åœºæ™¯ 2ï¼šæ—¶åŒºå¤„ç†

### å‰ææ¡ä»¶
- ç”¨æˆ· Aï¼šUTC+8ï¼ˆåŒ—äº¬ï¼‰
- ç”¨æˆ· Bï¼šUTC+0ï¼ˆä¼¦æ•¦ï¼‰

### æµ‹è¯•å†…å®¹

| ç”¨æˆ· | æœ¬åœ°æ—¶é—´ | UTC æ—¶é—´ | å¼€å§‹é€šçŸ¥ | ç»“æŸæŠ¥å‘Š |
|------|---------|---------|----------|---------|
| A | 08:00 | 00:00 | âœ“ | âœ“ |
| B | 08:00 | 08:00 | âœ“ | âœ“ |

### éªŒè¯ç‚¹
âœ“ æ¯ä¸ªç”¨æˆ·åœ¨å„è‡ªçš„æœ¬åœ°æ—¶é—´æ”¶åˆ°é€šçŸ¥
âœ“ æ—¥æœŸèŒƒå›´è®¡ç®—æ­£ç¡®ï¼ˆè·¨è¶Š UTC æ—¥æœŸçº¿ï¼‰

---

## æµ‹è¯•åœºæ™¯ 3ï¼šä¸Žæ˜¨æ—¥å¯¹æ¯”

### æ•°æ®è®¾ç½®

| æ—¥æœŸ | é¥®æ°´é‡ |
|------|--------|
| æ˜¨å¤© | 1800ml |
| ä»Šå¤© | 2200ml |

### é¢„æœŸç»“æžœ
```
ðŸŽ‰ ä¸Žæ˜¨æ—¥å¯¹æ¯”
ðŸ“ˆ æ¯”æ˜¨å¤©å¤šå–äº† 400mlï¼Œç»§ç»­ä¿æŒï¼
ï¼ˆæ˜¨æ—¥: 1800 mlï¼‰
```

### å…¶ä»–å¯¹æ¯”åœºæ™¯

**åœºæ™¯ 1ï¼šæœªå®Œæˆä½†æœ‰è¿›æ­¥**
- æ˜¨å¤©ï¼š1600ml
- ä»Šå¤©ï¼š1900ml
```
ðŸ’ª ä¸Žæ˜¨æ—¥å¯¹æ¯”
ðŸ“ˆ æ¯”æ˜¨å¤©å¤šå–äº† 300mlï¼Œç»§ç»­åŠ æ²¹ï¼
ï¼ˆæ˜¨æ—¥: 1600 mlï¼‰
```

**åœºæ™¯ 2ï¼šå®Œæˆåº¦ä¸‹é™**
- æ˜¨å¤©ï¼š2200ml
- ä»Šå¤©ï¼š2000ml
```
ðŸ’ª ä¸Žæ˜¨æ—¥å¯¹æ¯”
ðŸ“‰ æ¯”æ˜¨å¤©å°‘å–äº† 200mlï¼Œæ˜Žå¤©ç»§ç»­åŠ æ²¹ï¼
ï¼ˆæ˜¨æ—¥: 2200 mlï¼‰
```

**åœºæ™¯ 3ï¼šä¿æŒä¸€è‡´**
- æ˜¨å¤©ï¼š2000ml
- ä»Šå¤©ï¼š2000ml
```
ðŸ‘ ä¸Žæ˜¨æ—¥å¯¹æ¯”
âž¡ï¸ ä¸Žæ˜¨å¤©æŒå¹³ï¼Œä¿æŒç¨³å®šï¼
ï¼ˆæ˜¨æ—¥: 2000 mlï¼‰
```

---

## æµ‹è¯•åœºæ™¯ 4ï¼šæ—¶é—´è®¾ç½®å˜æ›´

### æ“ä½œæµç¨‹
```
å½“å‰è®¾ç½®: 08:00 ~ 22:00

æ‰§è¡Œ: /time 09:00 23:00

é¢„æœŸï¼š
- æ—§çš„ Job è¢«åˆ é™¤
  - daily_start_123456789 (08:00)
  - daily_end_123456789 (22:00)
  
- æ–°çš„ Job è¢«åˆ›å»º
  - daily_start_123456789 (09:00)
  - daily_end_123456789 (23:00)
```

### éªŒè¯
```
âœ“ 09:00 æ”¶åˆ°å¼€å§‹é€šçŸ¥ï¼ˆä¸æ˜¯ 08:00ï¼‰
âœ“ 23:00 æ”¶åˆ°ç»“æŸæŠ¥å‘Šï¼ˆä¸æ˜¯ 22:00ï¼‰
```

---

## æµ‹è¯•åœºæ™¯ 5ï¼šç¦ç”¨å’Œå¯ç”¨

### åœºæ™¯ 1ï¼šæ‰§è¡Œ /disable_forever
```
è¾“å…¥: /disable_forever

é¢„æœŸï¼š
- æ‰€æœ‰é€šçŸ¥åœæ­¢
- å¼€å§‹é€šçŸ¥ä¸å‘é€
- ç»“æŸæŠ¥å‘Šä¸å‘é€
```

### åœºæ™¯ 2ï¼šæ‰§è¡Œ /enable
```
è¾“å…¥: /enable

é¢„æœŸï¼š
- é€šçŸ¥æ¢å¤
- åˆ›å»ºæ–°çš„ daily_start å’Œ daily_end Job
```

---

## æµ‹è¯•åœºæ™¯ 6ï¼šé»‘åå•å¤„ç†

### æ“ä½œæµç¨‹
```
ç®¡ç†å‘˜æ‰§è¡Œ: /blacklist 123456789 åžƒåœ¾æ¶ˆæ¯

é¢„æœŸï¼š
- ç”¨æˆ·æ— æ³•å¯ç”¨æ–°çš„é€šçŸ¥
- çŽ°æœ‰é€šçŸ¥ç»§ç»­è¿è¡Œï¼ˆç­‰å¾…è¿‡æœŸï¼‰
- å†æ¬¡ /start æ—¶è·³è¿‡ Job åˆ›å»º
```

---

## æµ‹è¯•åœºæ™¯ 7ï¼šè¡¥å½•æ•°æ®å½±å“

### åˆå§‹çŠ¶æ€
```
ä»Šå¤© 22:00 æ”¶åˆ°æŠ¥å‘Šï¼š1000ml
```

### ç”¨æˆ·è¡¥å½•
```
æ‰§è¡Œ: /back 500 120

è¯´æ˜Žï¼šè¡¥å½• 120 åˆ†é’Ÿå‰ï¼ˆ20:00ï¼‰çš„ 500ml
```

### éªŒè¯
```
âœ“ æ–°çš„ 22:00 æŠ¥å‘Šåº”è¯¥æ˜¾ç¤º 1500ml
âœ“ å¯¹æ¯”é€»è¾‘å’Œæ˜¨æ—¥æ•°æ®æ­£ç¡®
```

---

## æµ‹è¯•åœºæ™¯ 8ï¼šè·¨è¶Šåˆå¤œ

### æ—¶é—´æµç¨‹
```
21:30 â†’ ç”¨æˆ·é¥®æ°´ 300ml (ä»Šå¤©ç»Ÿè®¡)
22:00 â†’ æ”¶åˆ°ä»Šå¤©çš„ç»“æŸæŠ¥å‘Š
00:00 â†’ æ–°çš„ä¸€å¤©å¼€å§‹
08:00 â†’ æ”¶åˆ°æ˜Žå¤©çš„å¼€å§‹é€šçŸ¥
```

### éªŒè¯ç‚¹
âœ“ æ¯æ—¥æ•°æ®èŒƒå›´æ­£ç¡®
âœ“ è·¨è¶Šåˆå¤œæ—¶çš„æ•°æ®ä¸æ··æ‚
âœ“ æ˜¨æ—¥å¯¹æ¯”ä½¿ç”¨æ­£ç¡®çš„æ—¥æœŸ

---

## æµ‹è¯•åœºæ™¯ 9ï¼šå¤šç”¨æˆ·å¹¶å‘

### è®¾ç½®å¤šä¸ªç”¨æˆ·

| ç”¨æˆ· | æ—¶åŒº | å¼€å§‹ | ç»“æŸ |
|------|------|------|------|
| ç”¨æˆ·A | UTC+8 | 08:00 | 22:00 |
| ç”¨æˆ·B | UTC+8 | 07:00 | 21:00 |
| ç”¨æˆ·C | UTC+0 | 08:00 | 22:00 |

### éªŒè¯
âœ“ 08:00 UTCï¼šç”¨æˆ·C æ”¶åˆ°å¼€å§‹é€šçŸ¥
âœ“ 09:00 UTCï¼ˆ17:00 åŒ—äº¬ï¼‰ï¼šç”¨æˆ·A å’Œ B ä¸æ”¶åˆ°é‡å¤é€šçŸ¥
âœ“ å„ç”¨æˆ·çš„é€šçŸ¥äº’ä¸å¹²æ‰°
âœ“ æ—¥æœŸè®¡ç®—ç‹¬ç«‹æ­£ç¡®

---

## æµ‹è¯•åœºæ™¯ 10ï¼šé«˜è´Ÿè½½æµ‹è¯•

### æ¨¡æ‹Ÿ
```
1000 ä¸ªç”¨æˆ·
æ¯ä¸ªç”¨æˆ·åˆ›å»º 3 ä¸ª Jobï¼ˆæé†’ + å¼€å§‹é€šçŸ¥ + ç»“æŸæŠ¥å‘Šï¼‰
æ€»è®¡ 3000 ä¸ª APScheduler Job

08:00-08:05ï¼š500 ä¸ªç”¨æˆ·åŒæ—¶å‘é€å¼€å§‹é€šçŸ¥
```

### éªŒè¯ç‚¹
âœ“ æ‰€æœ‰æ¶ˆæ¯æ­£ç¡®å‘é€
âœ“ æ²¡æœ‰æ¶ˆæ¯ä¸¢å¤±
âœ“ æ•°æ®åº“æŸ¥è¯¢æ²¡æœ‰å¼‚å¸¸
âœ“ å†…å­˜ä½¿ç”¨åˆç†

---

## æ‰‹åŠ¨æµ‹è¯•æ¸…å•

- [ ] `/start` å‘½ä»¤åˆ›å»ºæ‰€æœ‰å¿…è¦çš„ Job
- [ ] `/time` å‘½ä»¤æ›´æ–°é€šçŸ¥æ—¶é—´
- [ ] `/enable` å‘½ä»¤æ¢å¤é€šçŸ¥
- [ ] `/disable_forever` å‘½ä»¤åœæ­¢é€šçŸ¥
- [ ] 08:00 æ”¶åˆ°å¼€å§‹é€šçŸ¥
- [ ] 22:00 æ”¶åˆ°ç»“æŸæŠ¥å‘Š
- [ ] ç»“æŸæŠ¥å‘Šæ˜¾ç¤ºæ­£ç¡®çš„å¯¹æ¯”ä¿¡æ¯
- [ ] æ—¶åŒºè®¾ç½®å½±å“é€šçŸ¥æ—¶é—´
- [ ] æ˜¨æ—¥æ•°æ®è®¡ç®—æ­£ç¡®
- [ ] è¡¥å½•æ•°æ®å½±å“ç»“æŸæŠ¥å‘Š

---

## è°ƒè¯•å‘½ä»¤

### æŸ¥çœ‹æ‰€æœ‰ Job
```python
# åœ¨ä»£ç ä¸­æ‰“å°
for job in scheduler.get_jobs():
    print(f"{job.id}: {job.trigger}")
```

### æŸ¥çœ‹ç”¨æˆ·çš„æ—¥æœŸèŒƒå›´
```sql
-- æŸ¥è¯¢ä»Šå¤©çš„é¥®æ°´è®°å½•
SELECT * FROM records 
WHERE user_id = 123456789 
AND created_at >= '2026-02-04 00:00:00'::timestamp at time zone 'UTC'
AND created_at < '2026-02-05 00:00:00'::timestamp at time zone 'UTC';
```

### æ‰‹åŠ¨è§¦å‘é€šçŸ¥
```python
# åœ¨ Python ä»£ç ä¸­æ‰‹åŠ¨è°ƒç”¨
await send_start_notification()
await send_end_report()
```

